#install.packages("lidR")
library(lidR)
las <- readLAS("37.las")
#install.packages("lidR")
library(lidR)
#install.packages("lidR")
library(lidR)
las <- readLAS("41.las")
las <- readLAS("37.las", filter = "-keep_first") # Read only first return
las <- readLAS("41.las", filter = "-keep_first") # Read only first return
las <- readLAS("41.las", filter = "-keep_first")
print(las)
View(las)
#install.packages("lidR")
library(lidR)
las <- readLAS("41.las")
print(las)
plot(las)
plot(las, color = "ScanAngleRank", bg = "white", axis = TRUE, legend = TRUE)
plot(las, color = "RGB")
#ground Classification
LASfile <- system.file("extdata", "Topography.laz", package="lidR")
las <- readLAS(LASfile, select = "xyzrn")
las <- classify_ground(las, algorithm = pmf(ws = 5, th = 3))
plot(las, color = "Classification", size = 3, bg = "white")
#ground Classification
LASfile <- system.file("41.las", "Topography.laz", package="lidR")
las <- readLAS(LASfile, select = "xyzrn")
las <- classify_ground(las, algorithm = pmf(ws = 5, th = 3))
plot(las, color = "Classification", size = 3, bg = "white")
#ground Classification
LASfile <- system.file("extdata", "41.laz", package="lidR")
las <- readLAS(LASfile, select = "xyzrn")
#ground Classification
LASfile <- system.file("extdata", "41.las", package="lidR")
las <- readLAS(LASfile, select = "xyzrn")
las <- classify_ground(las, algorithm = pmf(ws = 5, th = 3))
plot(las, color = "Classification", size = 3, bg = "white")
#ground Classification
LASfile <- system.file("extdata", "41.las", package="lidR")
las <- readLAS(LASfile, select = "xyz")
#ground Classification
LASfile <- system.file("extdata", "41.las", package="lidR")
las <- readLAS(41.las, select = "xyz")
#ground Classification
LASfile <- system.file("extdata", "41.las", package="lidR")
las <- readLAS("41.las", select = "xyz")
las <- classify_ground(las, algorithm = pmf(ws = 5, th = 3))
plot(las, color = "Classification", size = 3, bg = "white")
#Digital terrain model
dtm_tin <- rasterize_terrain(las, res = 1, algorithm = tin())
plot_dtm3d(dtm_tin, bg = "white")
#Kriking
dtm_kriging <- rasterize_terrain(las, algorithm = kriging(k = 40))
plot_dtm3d(dtm_kriging, bg = "white")
#Kriking
dtm_tin <- rasterize_terrain(las, algorithm = kriging(k = 40))
#Digital surface model
LASfile <- system.file("extdata", "MixedConifer.laz", package ="lidR")
las <- readLAS(41.las)
#Digital surface model
LASfile <- system.file("extdata", "MixedConifer.laz", package ="lidR")
las <- readLAS("41.las")
plot(las, size = 3, bg = "white")
#Pointz to raster
chm <- rasterize_canopy(las, res = 1, algorithm = p2r())
col <- height.colors(25)
plot(chm, col = col)
chm <- rasterize_canopy(las, res = 0.5, algorithm = p2r())
plot(chm, col = col)
chm <- rasterize_canopy(las, res = 0.5, algorithm = dsmtin())
plot(chm, col = col)
plot(chm, col = height.colors(50))
plot(sf::st_geometry(ttops), add = TRUE, pch = 3)
#Segmentation
ttops <- locate_trees(las, lmf(ws = 5))
plot(chm, col = height.colors(50))
plot(sf::st_geometry(ttops), add = TRUE, pch = 3)
x <- plot(las, bg = "white", size = 4)
add_treetops3d(x, ttops)
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
# Point-to-raster 2 resolutions
chm_p2r_05 <- rasterize_canopy(las, 0.5, p2r(subcircle = 0.2), pkg = "terra")
chm_p2r_1 <- rasterize_canopy(las, 1, p2r(subcircle = 0.2), pkg = "terra")
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
# Post-processing median filter
kernel <- matrix(1,3,3)
chm_p2r_05_smoothed <- terra::focal(chm_p2r_05, w = kernel, fun = median, na.rm = TRUE)
chm_p2r_1_smoothed <- terra::focal(chm_p2r_1, w = kernel, fun = median, na.rm = TRUE)
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
library(terra)
library(terra)
# Point-to-raster 2 resolutions
chm_p2r_05 <- rasterize_canopy(las, 0.5, p2r(subcircle = 0.2), pkg = "terra")
chm_p2r_1 <- rasterize_canopy(las, 1, p2r(subcircle = 0.2), pkg = "terra")
# Post-processing median filter
kernel <- matrix(1,3,3)
chm_p2r_05_smoothed <- terra::focal(chm_p2r_05, w = kernel, fun = median, na.rm = TRUE)
chm_p2r_1_smoothed <- terra::focal(chm_p2r_1, w = kernel, fun = median, na.rm = TRUE)
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
ttops_chm_p2r_05 <- locate_trees(chm_p2r_05, lmf(5))
ttops_chm_p2r_1 <- locate_trees(chm_p2r_1, lmf(5))
ttops_chm_pitfree_05_1 <- locate_trees(chm_pitfree_05_1, lmf(5))
ttops_chm_pitfree_05_2 <- locate_trees(chm_pitfree_05_2, lmf(5))
ttops_chm_pitfree_05_1 <- locate_trees(chm_pitfree_05_1, lmf(5))
ttops_chm_p2r_1 <- locate_trees(chm_p2r_1, lmf(5))
ttops_chm_pitfree_05_1 <- locate_trees(chm_pitfree_05_1, lmf(5))
ttops_chm_pitfree_05_2 <- locate_trees(chm_pitfree_05_2, lmf(5))
ttops_chm_p2r_05_smoothed <- locate_trees(chm_p2r_05_smoothed, lmf(5))
ttops_chm_p2r_1_smoothed <- locate_trees(chm_p2r_1_smoothed, lmf(5))
#pOINT CLOUD SEGEMENTATION
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
las <- segment_trees(las, algo) # segment point cloud
plot(las, bg = "white", size = 4, color = "treeID") # visualize trees
algo <- dalponte2016(chm_p2r_05_smoothed, ttops_chm_p2r_05_smoothed)
crowns <- algo()
plot(crowns, col = pastel.colors(200))
